<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <style type="text/css"> .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(6) > .nav-list > .nav-list-item:nth-child(1) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #7fac15 0%, rgba(127, 172, 21, 0.8) 80%, rgba(127, 172, 21, 0) 100%); } .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(6) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(6) > .nav-list > .nav-list-item:not(.passive):nth-child(1) > .nav-list-expander svg { transform: rotate(-90deg); } .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(6) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(6) > .nav-list > .nav-list-item:not(.passive):nth-child(1) > .nav-list { display: block; } .site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list-expander svg { transform: rotate(-90deg); } .site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>JupyterHub on PLEIADES | PLEIADES User Documentation</title> <meta name="generator" content="Jekyll v4.3.2" /> <meta property="og:title" content="JupyterHub on PLEIADES" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="User documentation for the PLEIADES cluster at the University of Wuppertal" /> <meta property="og:description" content="User documentation for the PLEIADES cluster at the University of Wuppertal" /> <link rel="canonical" href="http://localhost:4000/jupyter/jupyterHub.html" /> <meta property="og:url" content="http://localhost:4000/jupyter/jupyterHub.html" /> <meta property="og:site_name" content="PLEIADES User Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="JupyterHub on PLEIADES" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"User documentation for the PLEIADES cluster at the University of Wuppertal","headline":"JupyterHub on PLEIADES","url":"http://localhost:4000/jupyter/jupyterHub.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> PLEIADES User Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting Started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted.html" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item"><a href="/gettingstarted/access.html" class="nav-list-link">Access</a></li><li class="nav-list-item"><a href="/gettingstarted/software.html" class="nav-list-link">Software & File Systems</a></li><li class="nav-list-item"><a href="/gettingstarted/computations.html" class="nav-list-link">Computations</a></li><li class="nav-list-item"><a href="/gettingstarted/zabbix.html" class="nav-list-link">Monitoring</a></li></ul></li><li class="nav-list-item"><a href="/hardware.html" class="nav-list-link">Hardware</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in File Systems category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/filesystem.html" class="nav-list-link">File Systems</a><ul class="nav-list"><li class="nav-list-item"><a href="/filesystem/BeeGFS.html" class="nav-list-link">BeeGFS</a></li><li class="nav-list-item"><a href="/filesystem/filetransfers.html" class="nav-list-link">Moving Data</a></li><li class="nav-list-item"><a href="/filesystem/bestpractices.html" class="nav-list-link">Best Practices</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Slurm category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/slurm.html" class="nav-list-link">Slurm</a><ul class="nav-list"><li class="nav-list-item"><a href="/slurm/basics.html" class="nav-list-link">Basics</a></li><li class="nav-list-item"><a href="/slurm/gpu.html" class="nav-list-link">Using GPUs</a></li><li class="nav-list-item"><a href="/slurm/exampleArray.html" class="nav-list-link">Job arrays</a></li><li class="nav-list-item"><a href="/slurm/exampleDeps.html" class="nav-list-link">Job dependencies</a></li><li class="nav-list-item"><a href="/slurm/exampleTmp.html" class="nav-list-link">Slurm example: Clean up tmp directory</a></li><li class="nav-list-item"><a href="/slurm/performance.html" class="nav-list-link">Job Performance</a></li><li class="nav-list-item"><a href="/slurm/bestpractices.html" class="nav-list-link">Best Practices</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Software on PLEIADES category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/software.html" class="nav-list-link">Software on PLEIADES</a><ul class="nav-list"><li class="nav-list-item"><a href="/software/avail.html" class="nav-list-link">Available Software</a></li><li class="nav-list-item"><a href="/software/modules.html" class="nav-list-link">Modules</a></li><li class="nav-list-item"><a href="/software/mpi.html" class="nav-list-link">MPI on PLEIADES</a></li><li class="nav-list-item"><a href="/software/containers.html" class="nav-list-link">Containers</a></li><li class="nav-list-item"><a href="/software/pgi.html" class="nav-list-link">PGI</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Jupyter category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/jupyter.html" class="nav-list-link">Jupyter</a><ul class="nav-list"><li class="nav-list-item"><a href="/jupyter/jupyterHub.html" class="nav-list-link">JupyterHub on PLEIADES</a></li><li class="nav-list-item"><a href="/jupyter/jupyter-nb_on_pleiades.html" class="nav-list-link">Custom Jupyter Notebooks on PLEIADES</a></li><li class="nav-list-item"><a href="/jupyter/jupyter-kernels.html" class="nav-list-link">Creating custom kernels with IPython</a></li></ul></li><li class="nav-list-item"><a href="/GridCertificates.html" class="nav-list-link">wLCG Grid Certificates</a></li><li class="nav-list-item"><a href="/PleiadesAcknowledgement.html" class="nav-list-link">PLEIADES Acknowledgement</a></li><li class="nav-list-item"><a href="/faq.html" class="nav-list-link">Frequently Answered Questions</a></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search PLEIADES User Documentation" aria-label="Search PLEIADES User Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://pleiades.uni-wuppertal.de/" class="site-button" > Pleiades Webpage </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/jupyter.html">Jupyter</a></li> <li class="breadcrumb-nav-list-item"><span>JupyterHub on PLEIADES</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h2 id="jupyter-jupyterhub-on-pleiades"> <a href="#jupyter-jupyterhub-on-pleiades" class="anchor-heading" aria-labelledby="jupyter-jupyterhub-on-pleiades"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Jupyter: JupyterHub on PLEIADES </h2> <p>PLEIADES provides users with easy access to a JupyterLab graphical user interface (GUI) that comes with preset resources. This is possible through a JupyterHub virtual machine that can only be reached from within the university’s network. Depending on the user’s location, a VPN may be necessary to access it. From the JupyterHub interface, users can automatically spawn JupyterLab servers and connect to them. The procedure for spawning is technically identical to batching any other job on PLEIADES. Therefore, depending on the current cluster load, it may take some time until the JupyterLab server job leaves the pending status (<em>PD</em>). Even after the job is already running (status <em>R</em>), it may take a few seconds for JupyterLab to establish a connection with JupyterHub because some modules need to be loaded from BeeGFS.</p> <h3 id="jupyterhub-available-resources"> <a href="#jupyterhub-available-resources" class="anchor-heading" aria-labelledby="jupyterhub-available-resources"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JupyterHub: Available resources </h3> <p>Users cannot adjust computational resources individually. Instead, the Scientific Computing Center PLEIADES provides multiple profiles with different resources that users can choose from. These profiles have been designed to make it easy for users to interact with their code for the purpose of performance analysis and quick evaluation. If users require a more customized resource setup, we also <a href="/jupyter/jupyter-nb_on_pleiades.html">provide a guide</a> to interactive Jupyter-notebook sessions with individually set resource requirements.</p> <p>If you are using Python packages in your simulations, you need to make sure, that they are also available in your JuyterLab server sessions. If you were using your own Python installation, which is not <em>Python 3.10.4</em>, you will need to install the packages again with <em>Python 3.10.4</em>. The easiest way to do so is to start a JupyterLab server through JupyterHub and to open a bash terminal inside (<em>File-&gt;New-&gt;Terminal</em>). This ensures that the right <code class="language-plaintext highlighter-rouge">pip</code> installation will be used for <code class="language-plaintext highlighter-rouge">python pip install --user &lt;PACKAGE&gt;</code>.</p> <h3 id="jupyterhub-access-and-usage"> <a href="#jupyterhub-access-and-usage" class="anchor-heading" aria-labelledby="jupyterhub-access-and-usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JupyterHub: Access and usage </h3> <p>To access JupyterHub, users can go to <a href="https://jupyterhub.pleiades.uni-wuppertal.de/">https://jupyterhub.pleiades.uni-wuppertal.de/</a>.</p> <p>Any important information about the cluster, such as planned maintenance, will be displayed here as well. Users will be asked to enter their credentials, which are the same as their PLEIADES account. Once users have signed in and assuming they have no JupyterLab server instance running, they will be directed to the profile spawn menu. Otherwise, they will be directed to their running JupyterLab server.</p> <p><a href="../assets/img/jupyterhub/jh_profileSelection.png" title="Dropdown menu for the profile selection"><img src="../assets/img/jupyterhub/jh_profileSelection.png" alt="Dropdown menu for the profile selection" /></a></p> <p>The available resources in the provided profiles are designed to give users the possibility of interactively evaluating their code and analyzing its multiprocessor capabilities. The following limitations apply to the JupyterLab servers initialized through JupyterHub:</p> <ul> <li>Runtime of JupyterLab servers is limited to 1 day.</li> <li>If jobs spend more than 8 hours with the pending status <em>PD</em>, they will be automatically cancelled. This is to prevent unattended JupyterLab servers from spawning and occupying valuable resources.</li> <li>Profiles with multiple CPUs or GPUs still have to spawn jobs on one single node. This means that a profile offering 4 CPUs will batch a job that waits until at least 4 CPUs are free on one node. Users should keep this in mind when available resources are limited.</li> </ul> <p>Once a profile has been selected, users can batch the JupyterLab server job by clicking on the “Start” button. This will automatically redirect users to the spawning screen, where they will remain until the job is running and connects to JupyterHub. Depending on the current cluster load, this can take some time. The graphic below shows a spawning screen with an open Event Log (opened by clicking on it).</p> <p><a href="assets/img/jupyterhub/jh_pending.png" title="Spawning screen with open event log"><img src="../assets/img/jupyterhub/jh_pending.png" alt="Spawning screen with open event log" /></a></p> <p>Here users can see, that</p> <ol> <li>A server has been requested, i.e. a job has been submitted.</li> <li>The job has been pending in the queue (status <em>PD</em>).</li> <li>The job has started and JupyterHub is now awaiting a connection to the JupyterLab server.</li> </ol> <p>Please note that the cluster job running (point 3) is usually not identical to the JupyterLab server being available. The batched job contains other instructions besides starting the actual JupyterLab server, and therefore it might take some time before a running job actually connects to JupyterHub.</p> <p>Once the connection to the JupyterLab server is established, the JupyterLab UI will be displayed as shown below.</p> <p><a href="assets/img/jupyterhub/jh_interface.png" title="GUI of JupyterLab"><img src="../assets/img/jupyterhub/jh_interface.png" alt="GUI of JupyterLab" /></a></p> <p>A comprehensive guide on how to use JupyterLab and its various features can be found <a href="https://jupyterlab.readthedocs.io/en/stable/user/interface.html">in the official documentation</a>.</p> <p>It is crucial to properly terminate your JupyterLab session as closing your browser window or logging out will not close the JupyterLab server. To end your session correctly, first, navigate to the Hub Control Panel by clicking on <em>File-&gt;Hub Control Panel</em> located in the top left corner of the interface. This will open the Hub Control Panel in a new window as shown below:</p> <p><a href="assets/img/jupyterhub/jh_hubControl.png" title="Hub Control Panel"><img src="../assets/img/jupyterhub/jh_hubControl.png" alt="Hub Control Panel" /></a></p> <p>Clicking on <em>My Server</em> or on the logo of the BUW will bring you back to your running JupyterLab server, whereas clicking on <em>Stop my Server</em> will terminate the job. Depending on the cluster load, this might take some time, however, after clicking on <em>Stop my Server</em> you are free to close all windows.<br /> If you are unable to terminate your server for any reason, you can always cancel the job manually by entering <code class="language-plaintext highlighter-rouge">scancel &lt;JOBID&gt;</code> in the terminal on the cluster, just like any other job on SLURM.</p> <h4 id="using-virtual-environments-for-custom-ipython-kernels"> <a href="#using-virtual-environments-for-custom-ipython-kernels" class="anchor-heading" aria-labelledby="using-virtual-environments-for-custom-ipython-kernels"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using virtual environments for custom IPython kernels </h4> <p>It is possible to define your own IPython kernels based on virtual environments created and managed through <em>Conda</em> or a combination of <em>pip</em> and <em>venv</em>. We describe this in detail in our section on the <a href="./jupyter-kernels.md">custom IPython kernels</a>.</p> <h3 id="jupyterhub-faq"> <a href="#jupyterhub-faq" class="anchor-heading" aria-labelledby="jupyterhub-faq"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> JupyterHub: FAQ </h3> <ul> <li><strong>What versions are you using?</strong><br /> We are using <em>JupyterHub 3.1.1</em> and <em>JupyterLab 3.5.0</em>.</li> <li><strong>I have mutliple jobs running on the cluster. How do I know which one is the JupyterLab server?</strong><br /> All JuypterLab server jobs get the same name, <em>spawner-jupyterhub</em>, although only a few characters might be visible when entering <code class="language-plaintext highlighter-rouge">squeue -u &lt;USERNAME&gt;</code>.</li> <li><strong>I want to check my JuypterLab logfiles. Where are they located?</strong><br /> The logfiles belonging to the JupyterLab job (not just for JupyterLab itself) are always written to the users home directory and have the following naming convention: <em>jupyterhub_slurmspawner_&lt;JOBID&gt;.log</em></li> <li><strong>I would love to have more resources available for my JupyterLab session. Is this possible?</strong><br /> Yes, you can manually configure and submit a JupyterLab server without using JupyterHub. Instructions on how to do this are provided <a href="/jupyter/jupyter-nb_on_pleiades.html">here</a>.</li> <li><strong>Why can’t I find my Python packages?</strong><br /> Please see the section <a href="#jupyterhub:-available-resources">Available Resources</a> to ensure you have installed the packages into the right Python directory.</li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
