<hr />
<h2>title: "Jupyter: JupyterHub on PLEIADES"</h2>
<h2>Jupyter: JupyterHub on PLEIADES</h2>
<p>PLEIADES provides easy access to a JupyterLab GUI with preset resources for its users. This is achieved through a JupyterHub VM, which is only reachable from within the university's network, so depending on your location a VPN might be necessary. From the JupyterHub interface users can automatically spawn JupyterLab servers and connect to them. This spawning procedure is technically identical to batching any other job on PLEIADES. This means that depending on current cluster load it might take some time until your JupyterLab server job leaves the pending status <em>PD</em>. Even after the job is already running (status <em>R</em>) it might take a few seconds for JupyterLab to establish connection with JupyterHub, because some modules need to be loaded from BeeGFS.</p>
<h3>JupyterHub: Available resources</h3>
<p>Computational resources cannot be individually adjusted by the user. Instead multiple profiles (with different resources) are provided by the PLEIADES scientific computing center from which the user can select the most appropriate one. The profiles have been designed, so users can easily interact with their code for the purpose of performance analysis and quick evaluation. If a more customized resource setup is desired, we also provide a guide to interactive Jupyter-notebook sessions with individually set resource requirements.</p>
<h3>JupyterHub: Access and Usage</h3>
<p>To sign in into the JupyterHub VM simply <a href="https://jupyterhub.pleiades.uni-wuppertal.de/">follow this link</a>.</p>
<p>Any important information regarding the cluster (for example planned maintenance) will be displayed here, aswell.
You will be asked to enter your credentials, which are identical to your PLEIADES account. Once signed in and assuming you have no instance of a JupyterLab server running, you will be directed to the profile spawn menu.</p>
<p><a href="../assets/img/jupyterhub/jh_profileSelection.png" title="Dropdown menu for the profile selection"><img alt="Dropdown menu for the profile selection" src="../assets/img/jupyterhub/jh_profileSelection.png" /></a></p>
<p>The available resources in the provided profiles are designed to give users the possibility of interactively evaluating and analyzing the multiprocessor capabilities of their code. Further, the following limitations apply to the JupoyterLab servers initialized through JupyterHub:</p>
<ul>
<li>Runtime of JupyterLab servers is limited to 1 day.</li>
<li>If jobs spend more than 8 hours with the pending status <em>PD</em> they will be automatically cancelled. This is to prevent unattended JupyterLab servers from spawning and occupying valuable resources.</li>
<li>Profiles with multiple CPUs or GPUs still have to spawn jobs on one single node. This means that a profile offering 4 CPUs will batch a job that waits until at least 4 CPUs are free on one node. Keep this in mind when available resources are limited.</li>
</ul>
<p>Once a profile has been selected, the JupyterLab server job can be batched by clicking on the <em>Start</em>-Button. This will automatically redirect you to the spawning screen, where you will remain until the job is running and connects to JupyterHub. Depending on the current cluster load this can take some time. The graphic below shows a spawning screen with an open <em>Event Log</em> (opened by clicking on it).</p>
<p><a href="assets/img/jupyterhub/jh_pending.png" title="Spawning screen with open event log"><img alt="Spawning screen with open event log" src="../assets/img/jupyterhub/jh_pending.png" /></a></p>
<p>Here we can see, that</p>
<ol>
<li>A server has been requested, i.e. a job has been submitted.</li>
<li>The job has been pending in the queue (status <em>PD</em>).</li>
<li>The job has started and JupyterHub is now awaiting a connection to the JupyterLab server.</li>
</ol>
<p>Please keep in mind, that the cluster job running (point 3) is usually not identical to the JuypterLab server beeing available. The batched job contains other instructions besides starting the actual JupyterLab server and therefore it might take some time before a running job actually connects to JupyterHub.</p>
<p>When the connection to the JuypterLab server is ready you will see the JupyterLab GUI shown below.</p>
<p><a href="assets/img/jupyterhub/jh_interface.png" title="GUI of JupyterLab"><img alt="GUI of JupyterLab" src="../assets/img/jupyterhub/jh_interface.png" /></a></p>
<p>A detailed description of all functionalities and how to work with JupyerLab can be found <a href="https://jupyterlab.readthedocs.io/en/stable/user/interface.html">in the official documentation</a></p>
<p>We would only like to emphasize how to correctly end a JupyterLab session, as closing your browser window or logging out does not close the JupyterLab server. First, you will have to go to the Hub Control Panel by clicking in the top left corner of the interface on <em>File-&gt;Hub Control Panel</em>. This opens the Hub Control Panel in a new window:</p>
<p><a href="assets/img/jupyterhub/jh_hubControl.png" title="Hub Control Panel"><img alt="Hub Control Panel" src="../assets/img/jupyterhub/jh_hubControl.png" /></a></p>
<p>Clicking on <em>My Server</em> or on the logo of the BUW will bring you back to your running JupyterLab server, whereas clicking on <em>Stop my Server</em> will end the job. Depending on the cluster load this might take some time, however, after clicking on <em>Stop my Server</em> you are free to close all windows.<br />
Should you not able to end your server for any reason, you can always cancel the job, like any other job on SLURM, manually by entering <code>scancel &lt;JOBID&gt;</code> in the terminal on the cluster.</p>
<h3>JupyterHub: FAQ</h3>
<ul>
<li><strong>What versions are you using?</strong><br />
We use <em>JupyterHub 3.1.1</em> and <em>JupyterLab 3.2.8</em>.</li>
<li><strong>I have mutliple jobs running on the cluster. How do I know which one is the JupyterLab server?</strong><br />
All JuypterLab server jobs get the same name <em>spawner-jupyterhub</em>, though only a few characters might be visible when entering <code>squeue -u &lt;USERNAME&gt;</code>.</li>
<li><strong>I want to check my JuypterLab logfiles. Where are they?</strong><br />
The logfiles belonging to the JupyterLab job (the whole job, not just JupyterLab) are always written to the users home directory and look like this: <em>jupyterhub_slurmspawner_&lt;JOBID&gt;.log</em></li>
<li><strong>I would love to have more resources available for my JupyterLab session. Is there a way?</strong><br />
Yes, you can manually configure and submit a JupyterLab server without using JupyterHub. We provide instructions <a href="{{ site.baseurl }}{% link Jupyter/jupyter-nb_on_pleiades.md %}">here</a>. </li>
</ul>